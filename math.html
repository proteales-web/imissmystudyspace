<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Interactive Math Game</title>
<link href="https://fonts.googleapis.com/css2?family=Josefin+Sans:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
  * { margin:0; padding:0; box-sizing:border-box; font-family:'Josefin Sans', sans-serif; }
  body, html { width:100%; height:100%; background:#141818; color:#f9f9f9; display:flex; justify-content:center; align-items:center; }
  .game-container {
    background:#141818;
    border:4px solid #f9f9f9;
    border-radius:15px;
    padding:30px;
    text-align:center;
    max-width:500px;
    width:90%;
  }
  h1 { margin-bottom:20px; color:#C9A96B; }
  .question { font-size:2rem; margin:20px 0; }
  .choices { display:flex; flex-wrap:wrap; justify-content:center; gap:15px; margin-top:15px; }
  .choices button { padding:10px 20px; font-size:1.2rem; border:none; border-radius:5px; background:#C9A96B; color:#141818; cursor:pointer; transition:0.3s; min-width:90px; }
  .choices button:hover { background:#b8995a; }
  .score, .timer, .highscore { margin-top:15px; font-size:1.2rem; }
  @media(max-width:400px){
    .question { font-size:1.5rem; }
    .choices button { font-size:1rem; padding:8px 12px; min-width:70px; }
  }
</style>
</head>
<body>

<div class="game-container">
  <h1>Math Challenge</h1>
  <div class="timer" id="timer">Time: 60s</div>
  <div class="question" id="question">Loading...</div>
  <div class="choices" id="choices"></div>
  <div class="score" id="score">Score: 0</div>
  <div class="highscore" id="highscore">High Score: 0</div>
  <button id="restartBtn" style="margin-top:15px; display:none; background:#f9f9f9; color:#141818;">Restart Game</button>
</div>

<script>
  const questionEl = document.getElementById('question');
  const choicesEl = document.getElementById('choices');
  const scoreEl = document.getElementById('score');
  const timerEl = document.getElementById('timer');
  const highscoreEl = document.getElementById('highscore');
  const restartBtn = document.getElementById('restartBtn');

  let score = 0;
  let highScore = localStorage.getItem('highScore') || 0;
  highscoreEl.innerText = `High Score: ${highScore}`;
  let timeLeft = 60;
  let timerId;
  let currentAnswer;

  function startGame() {
    score = 0;
    timeLeft = 60;
    scoreEl.innerText = `Score: ${score}`;
    timerEl.innerText = `Time: ${timeLeft}s`;
    restartBtn.style.display = 'none';
    generateQuestion();
    timerId = setInterval(() => {
      timeLeft--;
      timerEl.innerText = `Time: ${timeLeft}s`;
      if(timeLeft <= 0){
        endGame();
      }
    }, 1000);
  }

  function generateQuestion() {
    const operations = ['+', '-', '*', '/'];
    let difficulty = Math.min(20 + score*2, 100); // increase numbers as score increases
    let num1 = Math.floor(Math.random()*difficulty) + 1;
    let num2 = Math.floor(Math.random()*difficulty/2) + 1; 
    const op = operations[Math.floor(Math.random()*operations.length)];

    if(op === '/'){
      num1 = num1 * num2; // ensure divisible
      currentAnswer = +(num1 / num2).toFixed(0);
    } else {
      currentAnswer = eval(`${num1} ${op} ${num2}`);
    }
    questionEl.innerText = `${num1} ${op} ${num2} = ?`;

    // generate multiple choices
    let options = [currentAnswer];
    while(options.length < 4){
      let randOption = currentAnswer + Math.floor(Math.random()*10 - 5);
      if(!options.includes(randOption)) options.push(randOption);
    }
    options = options.sort(() => Math.random() - 0.5);
    
    choicesEl.innerHTML = '';
    options.forEach(opt => {
      const btn = document.createElement('button');
      btn.innerText = opt;
      btn.onclick = () => checkAnswer(opt);
      choicesEl.appendChild(btn);
    });
  }

  function checkAnswer(selected) {
    if(selected === currentAnswer){
      score++;
    } else {
      score = Math.max(0, score - 1);
    }
    scoreEl.innerText = `Score: ${score}`;
    generateQuestion();
  }

  function endGame() {
    clearInterval(timerId);
    questionEl.innerText = 'Game Over!';
    choicesEl.innerHTML = '';
    restartBtn.style.display = 'block';
    if(score > highScore){
      highScore = score;
      localStorage.setItem('highScore', highScore);
      highscoreEl.innerText = `High Score: ${highScore}`;
    }
  }

  restartBtn.addEventListener('click', startGame);

  startGame();
</script>

</body>
</html>
